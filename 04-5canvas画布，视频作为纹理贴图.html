<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>three测试文件1</title>
		<style type="text/css">
			body{
				margin:0;
				padding: 0;
				overflow: hidden;
			}
		    #can{
					display: block;
				}
		</style>
		<script src="http://www.yanhuangxueyuan.com/versions/threejsR92/build/three.js"></script>
		<script src="http://www.yanhuangxueyuan.com/threejs/examples/js/controls/OrbitControls.js"></script>
	</head>
	<body>
		<canvas id="can"></canvas>
		<script type="text/javascript">
			var canvas = document.getElementById("can");
			canvas.width = 512;
			canvas.height = 128;
			var c = canvas.getContext('2d');
			//矩形区域填充背景
			c.fillStyle='lightsalmon'
			c.fillRect(0,0,512, 128)
			// c.fillRect(x,y,width,height)
			c.beginPath()
			//文字
			c.beginPath()
			c.translate(256,64);
			c.fillStyle = "#888"; //文本填充颜色
			c.font = "bold 48px 宋体"; //字体样式设置
			c.textBaseline = "middle"; //文本与fillText定义的纵坐标
			c.textAlign = "center"; //文本居中(以fillText定义的横坐标)
			c.fillText("过年好", 0, 0);
		     
			 
			var scene=new THREE.Scene(); //创建场景对象
			// 1.canvas画布对象作为CanvasTexture的参数重建一个纹理对象
            // canvas画布可以理解为一张图片
			
			// var texture=new THREE.CanvasTexture(canvas)
			
			//打印紋理对象的image属性
			// console.log(texture.image) //width=512 height=128
			
			
			
			//2. Canvas画布加载图片
			var ctx=canvas.getContext('3d')
			var Image=new Image()
			Image.src="./photo/1.jpg"
			Image.onload=function(){
				var bg=ctx.createPattern(Image,'no-repeat')
				// 注意图片加载完成执行canvas相关方法后，要更新一下纹理
				  texture.needsUpdate = true;
			}
			//3. 视频作为three.js 纹理贴图 
			// 创建video对象
			// let video = document.createElement('video');
			// video.src = "1086x716.mp4"; // 设置视频地址
			// video.autoplay = "autoplay"; //要设置播放
			// // video对象作为VideoTexture参数创建纹理对象
			// var texture = new THREE.VideoTexture(video)
			// var geometry = new THREE.PlaneGeometry(108, 71); //矩形平面
			// var material = new THREE.MeshPhongMaterial({
			//   map: texture, // 设置纹理贴图
			// }); //材质对象Material
			
			var texture=new THREE.CanvasTexture(Image)
			var geometry=new THREE.BoxGeometry(100,100,100)
			var material = new THREE.MeshLambertMaterial({
			  map: texture, // 设置纹理贴图
			})
			
			// 创建一个矩形平面网模型，Canvas画布作为矩形网格模型的纹理贴图
			var mesh = new THREE.Mesh(geometry, material);
			scene.add(mesh)
			
			//光源设置
			var point=new THREE.PointLight(0xffffff);
			point.position.set(400,200,300);//光源位置
			scene.add(point);//将光源添加到场景中去
			
			//环境光  依次还有 点光源 平行光 
			var ambient=new THREE.AmbientLight(0x444444);
			scene.add(ambient);
			
			//相机设置
			//相机设置
			var width=window.innerWidth;//窗口宽度
			var height=window.innerHeight;//窗口高度
			var k=width/height ;//宽高比
			var s=200;//3d范围控制系数
			
			//创建相机对象
			var camera=new THREE.OrthographicCamera(-s * k, s * k, s, -s, 1, 1000);
			camera.position.set(200,300,200);//设置相机位置
			camera.lookAt(scene.position);//定义相机的位置与方向 即指向的场景对象
			
			//创建渲染器对象
			var renderer =new THREE.WebGLRenderer();
			renderer.setSize(width,height);//设置渲染区域尺寸
			renderer.setClearColor(0xb9d3ff,1);//设置背景颜色
			document.body.appendChild(renderer.domElement);//body元素中插入canvas对象
			//执行渲染操作  指定场景 相机作为参数
			// renderer.render(scene, camera);
			
			//鼠标操作
			function render() {
			  renderer.render(scene,camera);//执行渲染操作
			}
			render();
			var controls = new THREE.OrbitControls(camera,renderer.domElement);//创建控件对象
			controls.addEventListener('change', render);//监听鼠标、键盘事件
			
		</script>
	</body>
</html>

