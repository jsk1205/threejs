<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>three测试文件1</title>
		<style type="text/css">
			body{
				margin:0;
				padding: 0;
				overflow: hidden;
			}
		</style>
		<script src="http://www.yanhuangxueyuan.com/versions/threejsR92/build/three.js"></script>
		<script src="http://www.yanhuangxueyuan.com/threejs/examples/js/controls/OrbitControls.js"></script>
	</head>
	<body>
		<script type="text/javascript">
			var scene=new THREE.Scene(); //创建场景对象
			// console.log('打印场景API',THREE.Scene);
			console.log(scene)
			
			var axisHelper = new THREE.AxisHelper(500);
		    this.scene.add(axisHelper);
			
			//创建模型
			var geometry=new THREE.BoxGeometry(100,100,100);//创建一个立方体几何对象BoxGeometry
			// var geometry = new THREE.SphereGeometry(60, 40, 40); //球体
            console.log(geometry.vertices)
			// 为geometry提供变形目标的数据
			var box1 = new THREE.BoxGeometry(100, 5, 100); //为变形目标1提供数据
			var box2 = new THREE.BoxGeometry(5, 200, 5); //为变形目标2提供数据
			
			// 设置变形目标的数据
			geometry.morphTargets[0] = {name: 'target1',vertices: box1.vertices};
			geometry.morphTargets[1] = {name: 'target2',vertices: box2.vertices};
			
			var material=new THREE.MeshLambertMaterial({ //材质对象
				color: 0x0000ff,
				morphTargets: true, //允许变形
			});
			var mesh=new THREE.Mesh(geometry,material);//模型对象
			
			// 设置第一组顶点对几何体形状影响的变形系数
			mesh.morphTargetInfluences[0] = 0.5;
			// 设置第二组顶点对几何体形状影响的变形系数
			mesh.morphTargetInfluences[1] = 1;
			scene.add(mesh);//将模型添加到场景中去
			// 设置关键帧数据
			var Track1 = new THREE.KeyframeTrack('.morphTargetInfluences[0]', [0,10,20], [0,1, 0]);
			var Track2 = new THREE.KeyframeTrack('.morphTargetInfluences[1]', [20,30, 40], [0, 1,0]);
			// 创建一个剪辑clip对象，命名"default"，持续时间40
			var clip = new THREE.AnimationClip("default", 40, [Track1,Track2])
			
			// 播放编辑好的关键帧数据
			var mixer = new THREE.AnimationMixer(mesh); //创建混合器
			var AnimationAction = mixer.clipAction(clip); //返回动画操作对象
			AnimationAction.timeScale = 5; //默认1，可以调节播放速度
			AnimationAction.play(); //开始播放
		
			
			
			//光源设置
			var point=new THREE.PointLight(0xffffff);
			point.position.set(400,200,300);//光源位置
			scene.add(point);//将光源添加到场景中去
			
			//环境光  依次还有 点光源 平行光 
			var ambient=new THREE.AmbientLight(0x444444);
			scene.add(ambient);
			
			//相机设置
			var width=window.innerWidth;//窗口宽度
			var height=window.innerHeight;//窗口高度
			var k=width/height ;//宽高比
			var s=200;//3d范围控制系数
			
			//创建相机对象
			var camera=new THREE.OrthographicCamera(-s * k, s * k, s, -s, 1, 1000);
			camera.position.set(200,300,200);//设置相机位置
			camera.lookAt(scene.position);//定义相机的位置与方向 即指向的场景对象
			
			//创建渲染器对象
			var renderer =new THREE.WebGLRenderer();
			renderer.setSize(width,height);//设置渲染区域尺寸
			renderer.setClearColor(0xb9d3ff,1);//设置背景颜色
			document.body.appendChild(renderer.domElement);//body元素中插入canvas对象
			//执行渲染操作  指定场景 相机作为参数
			// renderer.render(scene, camera);
			
			
			// 创建一个时钟对象Clock
			var clock = new THREE.Clock();
			//鼠标操作
			function render() {
			    renderer.render(scene,camera);//执行渲染操作
			    requestAnimationFrame(render);
			    mixer.update(clock.getDelta());
			}
			render();
			var controls = new THREE.OrbitControls(camera,renderer.domElement);//创建控件对象
			controls.addEventListener('change', render);//监听鼠标、键盘事件
			 
			
			
			
			
		</script>
	</body>
</html>

